<?xml version="1.0" encoding="utf-8"?>
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-02-06 jeu. 17:25 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cubic configuration for the Stewart Platform</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Dehaeze Thomas" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="./css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="./css/readtheorg.css"/>
<script src="./js/jquery.min.js"></script>
<script src="./js/bootstrap.min.js"></script>
<script src="./js/jquery.stickytableheaders.min.js"></script>
<script src="./js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script>
      MathJax = {
          tex: { macros: {
                  bm: ["\\boldsymbol{#1}",1],
                  }
              }
          };
          </script>
          <script type="text/javascript"
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="./index.html"> UP </a>
 |
 <a accesskey="H" href="./index.html"> HOME </a>
</div><div id="content">
<h1 class="title">Cubic configuration for the Stewart Platform</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org43e4755">1. Questions we wish to answer with this analysis</a></li>
<li><a href="#org7c85269">2. <span class="todo TODO">TODO</span> Configuration Analysis - Stiffness Matrix</a>
<ul>
<li><a href="#org7a2e2af">2.1. Cubic Stewart platform centered with the cube center - Jacobian estimated at the cube center</a></li>
<li><a href="#orgdd082ef">2.2. Cubic Stewart platform centered with the cube center - Jacobian not estimated at the cube center</a></li>
<li><a href="#org314610d">2.3. Cubic Stewart platform not centered with the cube center - Jacobian estimated at the cube center</a></li>
<li><a href="#org460e492">2.4. Cubic Stewart platform not centered with the cube center - Jacobian estimated at the Stewart platform center</a></li>
<li><a href="#orgccb5ef0">2.5. Conclusion</a></li>
</ul>
</li>
<li><a href="#org29d657d">3. <span class="todo TODO">TODO</span> Cubic size analysis</a></li>
<li><a href="#orgc12b0fc">4. Functions</a>
<ul>
<li><a href="#org12a207e">4.1. <code>generateCubicConfiguration</code>: Generate a Cubic Configuration</a>
<ul>
<li><a href="#orgecee38f">Function description</a></li>
<li><a href="#orgb9948d8">Documentation</a></li>
<li><a href="#orgbfb0bd5">Optional Parameters</a></li>
<li><a href="#orgcb22d51">Position of the Cube</a></li>
<li><a href="#org2f09e98">Compute the pose</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org4eaf218">5. <span class="todo TODO">TODO</span> initializeCubicConfiguration</a>
<ul>
<li><a href="#org4fb2bc6">5.1. Function description</a></li>
<li><a href="#orgb540658">5.2. Optional Parameters</a></li>
<li><a href="#org1474f46">5.3. Cube Creation</a></li>
<li><a href="#org03d2dd7">5.4. Vectors of each leg</a></li>
<li><a href="#orgfed36b2">5.5. Verification of Height of the Stewart Platform</a></li>
<li><a href="#orgdb27b02">5.6. Determinate the location of the joints</a></li>
<li><a href="#org5079890">5.7. Returns Stewart Structure</a></li>
</ul>
</li>
<li><a href="#orgd9f1e20">6. <span class="todo TODO">TODO</span> Tests</a>
<ul>
<li><a href="#orgea7297c">6.1. First attempt to parametrisation</a></li>
<li><a href="#orgd6ed3c3">6.2. Second attempt</a></li>
<li><a href="#orgf39eafa">6.3. Generate the Stewart platform for a Cubic configuration</a></li>
</ul>
</li>
</ul>
</div>
</div>

<p>
The discovery of the Cubic configuration is done in <a class='org-ref-reference' href="#geng94_six_degree_of_freed_activ">geng94_six_degree_of_freed_activ</a>.
Further analysis is conducted in
</p>

<p>
The specificity of the Cubic configuration is that each actuator is orthogonal with the others.
</p>

<p>
The cubic (or orthogonal) configuration of the Stewart platform is now widely used (<a class='org-ref-reference' href="#preumont07_six_axis_singl_stage_activ">preumont07_six_axis_singl_stage_activ</a>,<a class='org-ref-reference' href="#jafari03_orthog_gough_stewar_platf_microm">jafari03_orthog_gough_stewar_platf_microm</a>).
</p>

<p>
According to <a class='org-ref-reference' href="#preumont07_six_axis_singl_stage_activ">preumont07_six_axis_singl_stage_activ</a>, the cubic configuration provides a uniform stiffness in all directions and <b>minimizes the crosscoupling</b> from actuator to sensor of different legs (being orthogonal to each other).
</p>

<p>
To generate and study the Cubic configuration, <code>initializeCubicConfiguration</code> is used (description in section <a href="#org83d7db1">5</a>).
</p>

<div id="outline-container-org43e4755" class="outline-2">
<h2 id="org43e4755"><span class="section-number-2">1</span> Questions we wish to answer with this analysis</h2>
<div class="outline-text-2" id="text-1">
<p>
The goal is to study the benefits of using a cubic configuration:
</p>
<ul class="org-ul">
<li>Equal stiffness in all the degrees of freedom?</li>
<li>No coupling between the actuators?</li>
<li>Is the center of the cube an important point?</li>
</ul>
</div>
</div>

<div id="outline-container-org7c85269" class="outline-2">
<h2 id="org7c85269"><span class="section-number-2">2</span> <span class="todo TODO">TODO</span> Configuration Analysis - Stiffness Matrix</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org7a2e2af" class="outline-3">
<h3 id="org7a2e2af"><span class="section-number-3">2.1</span> Cubic Stewart platform centered with the cube center - Jacobian estimated at the cube center</h3>
<div class="outline-text-3" id="text-2-1">
<p>
We create a cubic Stewart platform (figure <a href="#org01dbe25">1</a>) in such a way that the center of the cube (black dot) is located at the center of the Stewart platform (blue dot).
The Jacobian matrix is estimated at the location of the center of the cube.
</p>


<div id="org01dbe25" class="figure">
<p><img src="./figs/3d-cubic-stewart-aligned.png" alt="3d-cubic-stewart-aligned.png" />
</p>
<p><span class="figure-number">Figure 1: </span>Centered cubic configuration</p>
</div>

<div class="org-src-container">
<pre class="src src-matlab">opts = struct(...
    <span class="org-string">'H_tot'</span>, 100, ...<span class="org-comment"> % Total height of the Hexapod [mm]</span>
    <span class="org-string">'L'</span>,     200<span class="org-type">/</span>sqrt(3), ...<span class="org-comment"> % Size of the Cube [mm]</span>
    <span class="org-string">'H'</span>,     60, ...<span class="org-comment"> % Height between base joints and platform joints [mm]</span>
    <span class="org-string">'H0'</span>,    200<span class="org-type">/</span>2<span class="org-type">-</span>60<span class="org-type">/</span>2 ...<span class="org-comment"> % Height between the corner of the cube and the plane containing the base joints [mm]</span>
    );
stewart = initializeCubicConfiguration(opts);
opts = struct(...
    <span class="org-string">'Jd_pos'</span>, [0, 0, <span class="org-type">-</span>50], ...<span class="org-comment"> % Position of the Jacobian for displacement estimation from the top of the mobile platform [mm]</span>
    <span class="org-string">'Jf_pos'</span>, [0, 0, <span class="org-type">-</span>50]  ...<span class="org-comment"> % Position of the Jacobian for force location from the top of the mobile platform [mm]</span>
    );
stewart = computeGeometricalProperties(stewart, opts);

save(<span class="org-string">'./mat/stewart.mat'</span>, <span class="org-string">'stewart'</span>);
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab">K = stewart.Jf<span class="org-type">'*</span>stewart.Jf;
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-right">2</td>
<td class="org-right">1.9e-18</td>
<td class="org-right">-2.3e-17</td>
<td class="org-right">1.8e-18</td>
<td class="org-right">5.5e-17</td>
<td class="org-right">-1.5e-17</td>
</tr>

<tr>
<td class="org-right">1.9e-18</td>
<td class="org-right">2</td>
<td class="org-right">6.8e-18</td>
<td class="org-right">-6.1e-17</td>
<td class="org-right">-1.6e-18</td>
<td class="org-right">4.8e-18</td>
</tr>

<tr>
<td class="org-right">-2.3e-17</td>
<td class="org-right">6.8e-18</td>
<td class="org-right">2</td>
<td class="org-right">-6.7e-18</td>
<td class="org-right">4.9e-18</td>
<td class="org-right">5.3e-19</td>
</tr>

<tr>
<td class="org-right">1.8e-18</td>
<td class="org-right">-6.1e-17</td>
<td class="org-right">-6.7e-18</td>
<td class="org-right">0.0067</td>
<td class="org-right">-2.3e-20</td>
<td class="org-right">-6.1e-20</td>
</tr>

<tr>
<td class="org-right">5.5e-17</td>
<td class="org-right">-1.6e-18</td>
<td class="org-right">4.9e-18</td>
<td class="org-right">-2.3e-20</td>
<td class="org-right">0.0067</td>
<td class="org-right">1e-18</td>
</tr>

<tr>
<td class="org-right">-1.5e-17</td>
<td class="org-right">4.8e-18</td>
<td class="org-right">5.3e-19</td>
<td class="org-right">-6.1e-20</td>
<td class="org-right">1e-18</td>
<td class="org-right">0.027</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgdd082ef" class="outline-3">
<h3 id="orgdd082ef"><span class="section-number-3">2.2</span> Cubic Stewart platform centered with the cube center - Jacobian not estimated at the cube center</h3>
<div class="outline-text-3" id="text-2-2">
<p>
We create a cubic Stewart platform with center of the cube located at the center of the Stewart platform (figure <a href="#org01dbe25">1</a>).
The Jacobian matrix is not estimated at the location of the center of the cube.
</p>

<div class="org-src-container">
<pre class="src src-matlab">opts = struct(...
    <span class="org-string">'H_tot'</span>, 100, ...<span class="org-comment"> % Total height of the Hexapod [mm]</span>
    <span class="org-string">'L'</span>,     200<span class="org-type">/</span>sqrt(3), ...<span class="org-comment"> % Size of the Cube [mm]</span>
    <span class="org-string">'H'</span>,     60, ...<span class="org-comment"> % Height between base joints and platform joints [mm]</span>
    <span class="org-string">'H0'</span>,    200<span class="org-type">/</span>2<span class="org-type">-</span>60<span class="org-type">/</span>2 ...<span class="org-comment"> % Height between the corner of the cube and the plane containing the base joints [mm]</span>
    );
stewart = initializeCubicConfiguration(opts);
opts = struct(...
    <span class="org-string">'Jd_pos'</span>, [0, 0, 0], ...<span class="org-comment"> % Position of the Jacobian for displacement estimation from the top of the mobile platform [mm]</span>
    <span class="org-string">'Jf_pos'</span>, [0, 0, 0]  ...<span class="org-comment"> % Position of the Jacobian for force location from the top of the mobile platform [mm]</span>
    );
stewart = computeGeometricalProperties(stewart, opts);
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab">K = stewart.Jf<span class="org-type">'*</span>stewart.Jf;
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-right">2</td>
<td class="org-right">1.9e-18</td>
<td class="org-right">-2.3e-17</td>
<td class="org-right">1.5e-18</td>
<td class="org-right">-0.1</td>
<td class="org-right">-1.5e-17</td>
</tr>

<tr>
<td class="org-right">1.9e-18</td>
<td class="org-right">2</td>
<td class="org-right">6.8e-18</td>
<td class="org-right">0.1</td>
<td class="org-right">-1.6e-18</td>
<td class="org-right">4.8e-18</td>
</tr>

<tr>
<td class="org-right">-2.3e-17</td>
<td class="org-right">6.8e-18</td>
<td class="org-right">2</td>
<td class="org-right">-5.1e-19</td>
<td class="org-right">-5.5e-18</td>
<td class="org-right">5.3e-19</td>
</tr>

<tr>
<td class="org-right">1.5e-18</td>
<td class="org-right">0.1</td>
<td class="org-right">-5.1e-19</td>
<td class="org-right">0.012</td>
<td class="org-right">-3e-19</td>
<td class="org-right">3.1e-19</td>
</tr>

<tr>
<td class="org-right">-0.1</td>
<td class="org-right">-1.6e-18</td>
<td class="org-right">-5.5e-18</td>
<td class="org-right">-3e-19</td>
<td class="org-right">0.012</td>
<td class="org-right">1.9e-18</td>
</tr>

<tr>
<td class="org-right">-1.5e-17</td>
<td class="org-right">4.8e-18</td>
<td class="org-right">5.3e-19</td>
<td class="org-right">3.1e-19</td>
<td class="org-right">1.9e-18</td>
<td class="org-right">0.027</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org314610d" class="outline-3">
<h3 id="org314610d"><span class="section-number-3">2.3</span> Cubic Stewart platform not centered with the cube center - Jacobian estimated at the cube center</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Here, the &ldquo;center&rdquo; of the Stewart platform is not at the cube center (figure <a href="#org4aa7b60">2</a>).
The Jacobian is estimated at the cube center.
</p>


<div id="org4aa7b60" class="figure">
<p><img src="./figs/3d-cubic-stewart-misaligned.png" alt="3d-cubic-stewart-misaligned.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Not centered cubic configuration</p>
</div>

<p>
The center of the cube is at \(z = 110\).
The Stewart platform is from \(z = H_0 = 75\) to \(z = H_0 + H_{tot} = 175\).
The center height of the Stewart platform is then at \(z = \frac{175-75}{2} = 50\).
The center of the cube from the top platform is at \(z = 110 - 175 = -65\).
</p>

<div class="org-src-container">
<pre class="src src-matlab">opts = struct(...
    <span class="org-string">'H_tot'</span>, 100,         ...<span class="org-comment"> % Total height of the Hexapod [mm]</span>
    <span class="org-string">'L'</span>,     220<span class="org-type">/</span>sqrt(3), ...<span class="org-comment"> % Size of the Cube [mm]</span>
    <span class="org-string">'H'</span>,     60,          ...<span class="org-comment"> % Height between base joints and platform joints [mm]</span>
    <span class="org-string">'H0'</span>,    75           ...<span class="org-comment"> % Height between the corner of the cube and the plane containing the base joints [mm]</span>
    );
stewart = initializeCubicConfiguration(opts);
opts = struct(...
    <span class="org-string">'Jd_pos'</span>, [0, 0, <span class="org-type">-</span>65], ...<span class="org-comment"> % Position of the Jacobian for displacement estimation from the top of the mobile platform [mm]</span>
    <span class="org-string">'Jf_pos'</span>, [0, 0, <span class="org-type">-</span>65]  ...<span class="org-comment"> % Position of the Jacobian for force location from the top of the mobile platform [mm]</span>
    );
stewart = computeGeometricalProperties(stewart, opts);
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab">K = stewart.Jf<span class="org-type">'*</span>stewart.Jf;
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-right">2</td>
<td class="org-right">-1.8e-17</td>
<td class="org-right">2.6e-17</td>
<td class="org-right">3.3e-18</td>
<td class="org-right">0.04</td>
<td class="org-right">1.7e-19</td>
</tr>

<tr>
<td class="org-right">-1.8e-17</td>
<td class="org-right">2</td>
<td class="org-right">1.9e-16</td>
<td class="org-right">-0.04</td>
<td class="org-right">2.2e-19</td>
<td class="org-right">-5.3e-19</td>
</tr>

<tr>
<td class="org-right">2.6e-17</td>
<td class="org-right">1.9e-16</td>
<td class="org-right">2</td>
<td class="org-right">-8.9e-18</td>
<td class="org-right">6.5e-19</td>
<td class="org-right">-5.8e-19</td>
</tr>

<tr>
<td class="org-right">3.3e-18</td>
<td class="org-right">-0.04</td>
<td class="org-right">-8.9e-18</td>
<td class="org-right">0.0089</td>
<td class="org-right">-9.3e-20</td>
<td class="org-right">9.8e-20</td>
</tr>

<tr>
<td class="org-right">0.04</td>
<td class="org-right">2.2e-19</td>
<td class="org-right">6.5e-19</td>
<td class="org-right">-9.3e-20</td>
<td class="org-right">0.0089</td>
<td class="org-right">-2.4e-18</td>
</tr>

<tr>
<td class="org-right">1.7e-19</td>
<td class="org-right">-5.3e-19</td>
<td class="org-right">-5.8e-19</td>
<td class="org-right">9.8e-20</td>
<td class="org-right">-2.4e-18</td>
<td class="org-right">0.032</td>
</tr>
</tbody>
</table>

<p>
We obtain \(k_x = k_y = k_z\) and \(k_{\theta_x} = k_{\theta_y}\), but the Stiffness matrix is not diagonal.
</p>
</div>
</div>

<div id="outline-container-org460e492" class="outline-3">
<h3 id="org460e492"><span class="section-number-3">2.4</span> Cubic Stewart platform not centered with the cube center - Jacobian estimated at the Stewart platform center</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Here, the &ldquo;center&rdquo; of the Stewart platform is not at the cube center.
The Jacobian is estimated at the center of the Stewart platform.
</p>

<p>
The center of the cube is at \(z = 110\).
The Stewart platform is from \(z = H_0 = 75\) to \(z = H_0 + H_{tot} = 175\).
The center height of the Stewart platform is then at \(z = \frac{175-75}{2} = 50\).
The center of the cube from the top platform is at \(z = 110 - 175 = -65\).
</p>

<div class="org-src-container">
<pre class="src src-matlab">opts = struct(...
    <span class="org-string">'H_tot'</span>, 100, ...<span class="org-comment"> % Total height of the Hexapod [mm]</span>
    <span class="org-string">'L'</span>,     220<span class="org-type">/</span>sqrt(3), ...<span class="org-comment"> % Size of the Cube [mm]</span>
    <span class="org-string">'H'</span>,     60, ...<span class="org-comment"> % Height between base joints and platform joints [mm]</span>
    <span class="org-string">'H0'</span>,    75 ...<span class="org-comment"> % Height between the corner of the cube and the plane containing the base joints [mm]</span>
    );
stewart = initializeCubicConfiguration(opts);
opts = struct(...
    <span class="org-string">'Jd_pos'</span>, [0, 0, <span class="org-type">-</span>60], ...<span class="org-comment"> % Position of the Jacobian for displacement estimation from the top of the mobile platform [mm]</span>
    <span class="org-string">'Jf_pos'</span>, [0, 0, <span class="org-type">-</span>60]  ...<span class="org-comment"> % Position of the Jacobian for force location from the top of the mobile platform [mm]</span>
    );
stewart = computeGeometricalProperties(stewart, opts);
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab">K = stewart.Jf<span class="org-type">'*</span>stewart.Jf;
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-right">2</td>
<td class="org-right">-1.8e-17</td>
<td class="org-right">2.6e-17</td>
<td class="org-right">-5.7e-19</td>
<td class="org-right">0.03</td>
<td class="org-right">1.7e-19</td>
</tr>

<tr>
<td class="org-right">-1.8e-17</td>
<td class="org-right">2</td>
<td class="org-right">1.9e-16</td>
<td class="org-right">-0.03</td>
<td class="org-right">2.2e-19</td>
<td class="org-right">-5.3e-19</td>
</tr>

<tr>
<td class="org-right">2.6e-17</td>
<td class="org-right">1.9e-16</td>
<td class="org-right">2</td>
<td class="org-right">-1.5e-17</td>
<td class="org-right">6.5e-19</td>
<td class="org-right">-5.8e-19</td>
</tr>

<tr>
<td class="org-right">-5.7e-19</td>
<td class="org-right">-0.03</td>
<td class="org-right">-1.5e-17</td>
<td class="org-right">0.0085</td>
<td class="org-right">4.9e-20</td>
<td class="org-right">1.7e-19</td>
</tr>

<tr>
<td class="org-right">0.03</td>
<td class="org-right">2.2e-19</td>
<td class="org-right">6.5e-19</td>
<td class="org-right">4.9e-20</td>
<td class="org-right">0.0085</td>
<td class="org-right">-1.1e-18</td>
</tr>

<tr>
<td class="org-right">1.7e-19</td>
<td class="org-right">-5.3e-19</td>
<td class="org-right">-5.8e-19</td>
<td class="org-right">1.7e-19</td>
<td class="org-right">-1.1e-18</td>
<td class="org-right">0.032</td>
</tr>
</tbody>
</table>

<p>
We obtain \(k_x = k_y = k_z\) and \(k_{\theta_x} = k_{\theta_y}\), but the Stiffness matrix is not diagonal.
</p>
</div>
</div>

<div id="outline-container-orgccb5ef0" class="outline-3">
<h3 id="orgccb5ef0"><span class="section-number-3">2.5</span> Conclusion</h3>
<div class="outline-text-3" id="text-2-5">
<div class="important">
<ul class="org-ul">
<li>The cubic configuration permits to have \(k_x = k_y = k_z\) and \(k_{\theta\x} = k_{\theta_y}\)</li>
<li>The stiffness matrix \(K\) is diagonal for the cubic configuration if the Stewart platform and the cube are centered <b>and</b> the Jacobian is estimated at the cube center</li>
</ul>

</div>
</div>
</div>
</div>

<div id="outline-container-org29d657d" class="outline-2">
<h2 id="org29d657d"><span class="section-number-2">3</span> <span class="todo TODO">TODO</span> Cubic size analysis</h2>
<div class="outline-text-2" id="text-3">
<p>
We here study the effect of the size of the cube used for the Stewart configuration.
</p>

<p>
We fix the height of the Stewart platform, the center of the cube is at the center of the Stewart platform.
</p>

<p>
We only vary the size of the cube.
</p>

<div class="org-src-container">
<pre class="src src-matlab">H_cubes = 250<span class="org-type">:</span>20<span class="org-type">:</span>350;
stewarts = {zeros(length(H_cubes), 1)};
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab"><span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:length(H_cubes)</span>
  H_cube = H_cubes(<span class="org-constant">i</span>);
  H_tot = 100;
  H = 80;

  opts = struct(...
      <span class="org-string">'H_tot'</span>, H_tot, ...<span class="org-comment"> % Total height of the Hexapod [mm]</span>
      <span class="org-string">'L'</span>,     H_cube<span class="org-type">/</span>sqrt(3), ...<span class="org-comment"> % Size of the Cube [mm]</span>
      <span class="org-string">'H'</span>,     H, ...<span class="org-comment"> % Height between base joints and platform joints [mm]</span>
      <span class="org-string">'H0'</span>,    H_cube<span class="org-type">/</span>2<span class="org-type">-</span>H<span class="org-type">/</span>2 ...<span class="org-comment"> % Height between the corner of the cube and the plane containing the base joints [mm]</span>
      );
  stewart = initializeCubicConfiguration(opts);

  opts = struct(...
      <span class="org-string">'Jd_pos'</span>, [0, 0, H_cube<span class="org-type">/</span>2<span class="org-type">-</span>opts.H0<span class="org-type">-</span>opts.H_tot], ...<span class="org-comment"> % Position of the Jacobian for displacement estimation from the top of the mobile platform [mm]</span>
      <span class="org-string">'Jf_pos'</span>, [0, 0, H_cube<span class="org-type">/</span>2<span class="org-type">-</span>opts.H0<span class="org-type">-</span>opts.H_tot]  ...<span class="org-comment"> % Position of the Jacobian for force location from the top of the mobile platform [mm]</span>
      );
  stewart = computeGeometricalProperties(stewart, opts);
  stewarts(<span class="org-constant">i</span>) = {stewart};
<span class="org-keyword">end</span>
</pre>
</div>


<p>
The Stiffness matrix is computed for all generated Stewart platforms.
</p>
<div class="org-src-container">
<pre class="src src-matlab">Ks = zeros(6, 6, length(H_cube));
<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:length(H_cubes)</span>
  Ks(<span class="org-type">:</span>, <span class="org-type">:</span>, <span class="org-constant">i</span>) = stewarts{<span class="org-constant">i</span>}.Jd<span class="org-type">'*</span>stewarts{<span class="org-constant">i</span>}.Jd;
<span class="org-keyword">end</span>
</pre>
</div>

<p>
The only elements of \(K\) that vary are \(k_{\theta_x} = k_{\theta_y}\) and \(k_{\theta_z}\).
</p>

<p>
Finally, we plot \(k_{\theta_x} = k_{\theta_y}\) and \(k_{\theta_z}\)
</p>
<div class="org-src-container">
<pre class="src src-matlab"><span class="org-type">figure</span>;
hold on;
plot(H_cubes, squeeze(Ks(4, 4, <span class="org-type">:</span>)), <span class="org-string">'DisplayName'</span>, <span class="org-string">'$k_{\theta_x}$'</span>);
plot(H_cubes, squeeze(Ks(6, 6, <span class="org-type">:</span>)), <span class="org-string">'DisplayName'</span>, <span class="org-string">'$k_{\theta_z}$'</span>);
hold off;
legend(<span class="org-string">'location'</span>, <span class="org-string">'northwest'</span>);
xlabel(<span class="org-string">'Cube Size [mm]'</span>); ylabel(<span class="org-string">'Rotational stiffnes [normalized]'</span>);
</pre>
</div>


<div id="orgeec8e66" class="figure">
<p><img src="figs/stiffness_cube_size.png" alt="stiffness_cube_size.png" />
</p>
<p><span class="figure-number">Figure 3: </span>\(k_{\theta_x} = k_{\theta_y}\) and \(k_{\theta_z}\) function of the size of the cube</p>
</div>


<p>
We observe that \(k_{\theta_x} = k_{\theta_y}\) and \(k_{\theta_z}\) increase linearly with the cube size.
</p>

<div class="important">
<p>
In order to maximize the rotational stiffness of the Stewart platform, the size of the cube should be the highest possible.
In that case, the legs will the further separated. Size of the cube is then limited by allowed space.
</p>

</div>
</div>
</div>

<div id="outline-container-orgc12b0fc" class="outline-2">
<h2 id="orgc12b0fc"><span class="section-number-2">4</span> Functions</h2>
<div class="outline-text-2" id="text-4">
<p>
<a id="orgee0330a"></a>
</p>
</div>

<div id="outline-container-org12a207e" class="outline-3">
<h3 id="org12a207e"><span class="section-number-3">4.1</span> <code>generateCubicConfiguration</code>: Generate a Cubic Configuration</h3>
<div class="outline-text-3" id="text-4-1">
<p>
<a id="org0a684d8"></a>
</p>

<p>
This Matlab function is accessible <a href="src/generateCubicConfiguration.m">here</a>.
</p>
</div>

<div id="outline-container-orgecee38f" class="outline-4">
<h4 id="orgecee38f">Function description</h4>
<div class="outline-text-4" id="text-orgecee38f">
<div class="org-src-container">
<pre class="src src-matlab"><span class="org-keyword">function</span> <span class="org-variable-name">[stewart]</span> = <span class="org-function-name">generateCubicConfiguration</span>(<span class="org-variable-name">stewart</span>, <span class="org-variable-name">args</span>)
<span class="org-comment">% generateCubicConfiguration - Generate a Cubic Configuration</span>
<span class="org-comment">%</span>
<span class="org-comment">% Syntax: [stewart] = generateCubicConfiguration(stewart, args)</span>
<span class="org-comment">%</span>
<span class="org-comment">% Inputs:</span>
<span class="org-comment">%    - stewart - A structure with the following fields</span>
<span class="org-comment">%        - H   [1x1] - Total height of the platform [m]</span>
<span class="org-comment">%    - args - Can have the following fields:</span>
<span class="org-comment">%        - Hc  [1x1] - Height of the "useful" part of the cube [m]</span>
<span class="org-comment">%        - FOc [1x1] - Height of the center of the cube with respect to {F} [m]</span>
<span class="org-comment">%        - FHa [1x1] - Height of the plane joining the points ai with respect to the frame {F} [m]</span>
<span class="org-comment">%        - MHb [1x1] - Height of the plane joining the points bi with respect to the frame {M} [m]</span>
<span class="org-comment">%</span>
<span class="org-comment">% Outputs:</span>
<span class="org-comment">%    - stewart - updated Stewart structure with the added fields:</span>
<span class="org-comment">%        - Fa  [3x6] - Its i'th column is the position vector of joint ai with respect to {F}</span>
<span class="org-comment">%        - Mb  [3x6] - Its i'th column is the position vector of joint bi with respect to {M}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb9948d8" class="outline-4">
<h4 id="orgb9948d8">Documentation</h4>
<div class="outline-text-4" id="text-orgb9948d8">

<div id="orgff1f403" class="figure">
<p><img src="figs/cubic-configuration-definition.png" alt="cubic-configuration-definition.png" />
</p>
<p><span class="figure-number">Figure 4: </span>Cubic Configuration</p>
</div>
</div>
</div>

<div id="outline-container-orgbfb0bd5" class="outline-4">
<h4 id="orgbfb0bd5">Optional Parameters</h4>
<div class="outline-text-4" id="text-orgbfb0bd5">
<div class="org-src-container">
<pre class="src src-matlab">arguments
    stewart
    args.Hc  (1,1) double {mustBeNumeric, mustBePositive} = 60e<span class="org-type">-</span>3
    args.FOc (1,1) double {mustBeNumeric} = 50e<span class="org-type">-</span>3
    args.FHa (1,1) double {mustBeNumeric, mustBePositive} = 15e<span class="org-type">-</span>3
    args.MHb (1,1) double {mustBeNumeric, mustBePositive} = 15e<span class="org-type">-</span>3
<span class="org-keyword">end</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb22d51" class="outline-4">
<h4 id="orgcb22d51">Position of the Cube</h4>
<div class="outline-text-4" id="text-orgcb22d51">
<p>
We define the useful points of the cube with respect to the Cube&rsquo;s center.
\({}^{C}C\) are the 6 vertices of the cubes expressed in a frame {C} which is
located at the center of the cube and aligned with {F} and {M}.
</p>

<div class="org-src-container">
<pre class="src src-matlab">sx = [ 2; <span class="org-type">-</span>1; <span class="org-type">-</span>1];
sy = [ 0;  1; <span class="org-type">-</span>1];
sz = [ 1;  1;  1];

R = [sx, sy, sz]<span class="org-type">./</span>vecnorm([sx, sy, sz]);

L = args.Hc<span class="org-type">*</span>sqrt(3);

Cc = R<span class="org-type">'*</span>[[0;0;L],[L;0;L],[L;0;0],[L;L;0],[0;L;0],[0;L;L]] <span class="org-type">-</span> [0;0;1.5<span class="org-type">*</span>args.Hc];

CCf = [Cc(<span class="org-type">:</span>,1), Cc(<span class="org-type">:</span>,3), Cc(<span class="org-type">:</span>,3), Cc(<span class="org-type">:</span>,5), Cc(<span class="org-type">:</span>,5), Cc(<span class="org-type">:</span>,1)]; <span class="org-comment">% CCf(:,i) corresponds to the bottom cube's vertice corresponding to the i'th leg</span>
CCm = [Cc(<span class="org-type">:</span>,2), Cc(<span class="org-type">:</span>,2), Cc(<span class="org-type">:</span>,4), Cc(<span class="org-type">:</span>,4), Cc(<span class="org-type">:</span>,6), Cc(<span class="org-type">:</span>,6)]; <span class="org-comment">% CCm(:,i) corresponds to the top cube's vertice corresponding to the i'th leg</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2f09e98" class="outline-4">
<h4 id="org2f09e98">Compute the pose</h4>
<div class="outline-text-4" id="text-org2f09e98">
<p>
We can compute the vector of each leg \({}^{C}\hat{\bm{s}}_{i}\) (unit vector from \({}^{C}C_{f}\) to \({}^{C}C_{m}\)).
</p>
<div class="org-src-container">
<pre class="src src-matlab">CSi = (CCm <span class="org-type">-</span> CCf)<span class="org-type">./</span>vecnorm(CCm <span class="org-type">-</span> CCf);
</pre>
</div>

<p>
We now which to compute the position of the joints \(a_{i}\) and \(b_{i}\).
</p>
<div class="org-src-container">
<pre class="src src-matlab">stewart.Fa = CCf <span class="org-type">+</span> [0; 0; args.FOc] <span class="org-type">+</span> ((args.FHa<span class="org-type">-</span>(args.FOc<span class="org-type">-</span>args.Hc<span class="org-type">/</span>2))<span class="org-type">./</span>CSi(3,<span class="org-type">:</span>))<span class="org-type">.*</span>CSi;
stewart.Mb = CCf <span class="org-type">+</span> [0; 0; args.FOc<span class="org-type">-</span>stewart.H] <span class="org-type">+</span> ((stewart.H<span class="org-type">-</span>args.MHb<span class="org-type">-</span>(args.FOc<span class="org-type">-</span>args.Hc<span class="org-type">/</span>2))<span class="org-type">./</span>CSi(3,<span class="org-type">:</span>))<span class="org-type">.*</span>CSi;
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org4eaf218" class="outline-2">
<h2 id="org4eaf218"><span class="section-number-2">5</span> <span class="todo TODO">TODO</span> initializeCubicConfiguration</h2>
<div class="outline-text-2" id="text-5">
<p>
<a id="org83d7db1"></a>
</p>
</div>

<div id="outline-container-org4fb2bc6" class="outline-3">
<h3 id="org4fb2bc6"><span class="section-number-3">5.1</span> Function description</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">
<pre class="src src-matlab"><span class="org-keyword">function</span> <span class="org-variable-name">[stewart]</span> = <span class="org-function-name">initializeCubicConfiguration</span>(<span class="org-variable-name">opts_param</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb540658" class="outline-3">
<h3 id="orgb540658"><span class="section-number-3">5.2</span> Optional Parameters</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Default values for opts.
</p>
<div class="org-src-container">
<pre class="src src-matlab">opts = struct(...
    <span class="org-string">'H_tot'</span>, 90,  ...<span class="org-comment"> % Total height of the Hexapod [mm]</span>
    <span class="org-string">'L'</span>,     110, ...<span class="org-comment"> % Size of the Cube [mm]</span>
    <span class="org-string">'H'</span>,     40,  ...<span class="org-comment"> % Height between base joints and platform joints [mm]</span>
    <span class="org-string">'H0'</span>,    75   ...<span class="org-comment"> % Height between the corner of the cube and the plane containing the base joints [mm]</span>
    );
</pre>
</div>

<p>
Populate opts with input parameters
</p>
<div class="org-src-container">
<pre class="src src-matlab"><span class="org-keyword">if</span> exist(<span class="org-string">'opts_param'</span>,<span class="org-string">'var'</span>)
    <span class="org-keyword">for</span> <span class="org-variable-name">opt</span> = <span class="org-constant">fieldnames(opts_param)'</span>
        opts.(opt{1}) = opts_param.(opt{1});
    <span class="org-keyword">end</span>
<span class="org-keyword">end</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1474f46" class="outline-3">
<h3 id="org1474f46"><span class="section-number-3">5.3</span> Cube Creation</h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-src-container">
<pre class="src src-matlab">points = [0, 0, 0; ...
          0, 0, 1; ...
          0, 1, 0; ...
          0, 1, 1; ...
          1, 0, 0; ...
          1, 0, 1; ...
          1, 1, 0; ...
          1, 1, 1];
points = opts.L<span class="org-type">*</span>points;
</pre>
</div>

<p>
We create the rotation matrix to rotate the cube
</p>
<div class="org-src-container">
<pre class="src src-matlab">sx = cross([1, 1, 1], [1 0 0]);
sx = sx<span class="org-type">/</span>norm(sx);

sy = <span class="org-type">-</span>cross(sx, [1, 1, 1]);
sy = sy<span class="org-type">/</span>norm(sy);

sz = [1, 1, 1];
sz = sz<span class="org-type">/</span>norm(sz);

R = [sx<span class="org-type">'</span>, sy<span class="org-type">'</span>, sz<span class="org-type">'</span>]<span class="org-type">'</span>;
</pre>
</div>

<p>
We use to rotation matrix to rotate the cube
</p>
<div class="org-src-container">
<pre class="src src-matlab">cube = zeros(size(points));
<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:size(points, 1)</span>
  cube(<span class="org-constant">i</span>, <span class="org-type">:</span>) = R <span class="org-type">*</span> points(<span class="org-constant">i</span>, <span class="org-type">:</span>)<span class="org-type">'</span>;
<span class="org-keyword">end</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org03d2dd7" class="outline-3">
<h3 id="org03d2dd7"><span class="section-number-3">5.4</span> Vectors of each leg</h3>
<div class="outline-text-3" id="text-5-4">
<div class="org-src-container">
<pre class="src src-matlab">leg_indices = [3, 4; ...
               2, 4; ...
               2, 6; ...
               5, 6; ...
               5, 7; ...
               3, 7];
</pre>
</div>

<p>
Vectors are:
</p>
<div class="org-src-container">
<pre class="src src-matlab">legs = zeros(6, 3);
legs_start = zeros(6, 3);

<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:6</span>
  legs(<span class="org-constant">i</span>, <span class="org-type">:</span>) = cube(leg_indices(<span class="org-constant">i</span>, 2), <span class="org-type">:</span>) <span class="org-type">-</span> cube(leg_indices(<span class="org-constant">i</span>, 1), <span class="org-type">:</span>);
  legs_start(<span class="org-constant">i</span>, <span class="org-type">:</span>) = cube(leg_indices(<span class="org-constant">i</span>, 1), <span class="org-type">:</span>);
<span class="org-keyword">end</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfed36b2" class="outline-3">
<h3 id="orgfed36b2"><span class="section-number-3">5.5</span> Verification of Height of the Stewart Platform</h3>
<div class="outline-text-3" id="text-5-5">
<p>
If the Stewart platform is not contained in the cube, throw an error.
</p>

<div class="org-src-container">
<pre class="src src-matlab">Hmax = cube(4, 3) <span class="org-type">-</span> cube(2, 3);
<span class="org-keyword">if</span> opts.H0 <span class="org-type">&lt;</span> cube(2, 3)
  error(sprintf(<span class="org-string">'H0 is not high enought. Minimum H0 = %.1f'</span>, cube(2, 3)));
<span class="org-keyword">else</span> <span class="org-keyword">if</span> opts.H0 <span class="org-type">+</span> opts.H <span class="org-type">&gt;</span> cube(4, 3)
  error(sprintf(<span class="org-string">'H0+H is too high. Maximum H0+H = %.1f'</span>, cube(4, 3)));
  error(<span class="org-string">'H0+H is too high'</span>);
<span class="org-keyword">end</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdb27b02" class="outline-3">
<h3 id="orgdb27b02"><span class="section-number-3">5.6</span> Determinate the location of the joints</h3>
<div class="outline-text-3" id="text-5-6">
<p>
We now determine the location of the joints on the fixed platform w.r.t the fixed frame \(\{A\}\).
\(\{A\}\) is fixed to the bottom of the base.
</p>
<div class="org-src-container">
<pre class="src src-matlab">Aa = zeros(6, 3);
<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:6</span>
  t = (opts.H0<span class="org-type">-</span>legs_start(<span class="org-constant">i</span>, 3))<span class="org-type">/</span>(legs(<span class="org-constant">i</span>, 3));
  Aa(<span class="org-constant">i</span>, <span class="org-type">:</span>) = legs_start(<span class="org-constant">i</span>, <span class="org-type">:</span>) <span class="org-type">+</span> t<span class="org-type">*</span>legs(<span class="org-constant">i</span>, <span class="org-type">:</span>);
<span class="org-keyword">end</span>
</pre>
</div>

<p>
And the location of the joints on the mobile platform with respect to \(\{A\}\).
</p>
<div class="org-src-container">
<pre class="src src-matlab">Ab = zeros(6, 3);
<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:6</span>
  t = (opts.H0<span class="org-type">+</span>opts.H<span class="org-type">-</span>legs_start(<span class="org-constant">i</span>, 3))<span class="org-type">/</span>(legs(<span class="org-constant">i</span>, 3));
  Ab(<span class="org-constant">i</span>, <span class="org-type">:</span>) = legs_start(<span class="org-constant">i</span>, <span class="org-type">:</span>) <span class="org-type">+</span> t<span class="org-type">*</span>legs(<span class="org-constant">i</span>, <span class="org-type">:</span>);
<span class="org-keyword">end</span>
</pre>
</div>

<p>
And the location of the joints on the mobile platform with respect to \(\{B\}\).
</p>
<div class="org-src-container">
<pre class="src src-matlab">Bb = zeros(6, 3);
Bb = Ab <span class="org-type">-</span> (opts.H0 <span class="org-type">+</span> opts.H_tot<span class="org-type">/</span>2 <span class="org-type">+</span> opts.H<span class="org-type">/</span>2)<span class="org-type">*</span>[0, 0, 1];
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab">h = opts.H0 <span class="org-type">+</span> opts.H<span class="org-type">/</span>2 <span class="org-type">-</span> opts.H_tot<span class="org-type">/</span>2;
Aa = Aa <span class="org-type">-</span> h<span class="org-type">*</span>[0, 0, 1];
Ab = Ab <span class="org-type">-</span> h<span class="org-type">*</span>[0, 0, 1];
</pre>
</div>
</div>
</div>

<div id="outline-container-org5079890" class="outline-3">
<h3 id="org5079890"><span class="section-number-3">5.7</span> Returns Stewart Structure</h3>
<div class="outline-text-3" id="text-5-7">
<div class="org-src-container">
<pre class="src src-matlab">  stewart = struct();
  stewart.Aa = Aa;
  stewart.Ab = Ab;
  stewart.Bb = Bb;
  stewart.H_tot = opts.H_tot;
<span class="org-keyword">end</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd9f1e20" class="outline-2">
<h2 id="orgd9f1e20"><span class="section-number-2">6</span> <span class="todo TODO">TODO</span> Tests</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orgea7297c" class="outline-3">
<h3 id="orgea7297c"><span class="section-number-3">6.1</span> First attempt to parametrisation</h3>
<div class="outline-text-3" id="text-6-1">

<div id="org65e66e5" class="figure">
<p><img src="./figs/stewart_bottom_plate.png" alt="stewart_bottom_plate.png" />
</p>
<p><span class="figure-number">Figure 5: </span>Schematic of the bottom plates with all the parameters</p>
</div>

<p>
The goal is to choose \(\alpha\), \(\beta\), \(R_\text{leg, t}\) and \(R_\text{leg, b}\) in such a way that the configuration is cubic.
</p>


<p>
The configuration is cubic if:
\[ \overrightarrow{a_i b_i} \cdot \overrightarrow{a_j b_j} = 0, \ \forall i, j = [1, \hdots, 6], i \ne j \]
</p>

<p>
Lets express \(a_i\), \(b_i\) and \(a_j\):
</p>
\begin{equation*}
  a_1 = \begin{bmatrix}R_{\text{leg,b}} \cos(120 - \alpha) \\  R_{\text{leg,b}} \cos(120 - \alpha) \\ 0\end{bmatrix} ; \quad
  a_2 = \begin{bmatrix}R_{\text{leg,b}} \cos(120 + \alpha) \\  R_{\text{leg,b}} \cos(120 + \alpha) \\ 0\end{bmatrix} ; \quad
\end{equation*}

\begin{equation*}
  b_1 = \begin{bmatrix}R_{\text{leg,t}} \cos(120 - \beta) \\  R_{\text{leg,t}} \cos(120 - \beta\\ H\end{bmatrix} ; \quad
  b_2 = \begin{bmatrix}R_{\text{leg,t}} \cos(120 + \beta) \\  R_{\text{leg,t}} \cos(120 + \beta\\ H\end{bmatrix} ; \quad
\end{equation*}

<p>
\[ \overrightarrow{a_1 b_1} = b_1 - a_1 = \begin{bmatrix}R_{\text{leg}} \cos(120 - \alpha) \\  R_{\text{leg}} \cos(120 - \alpha) \\ 0\end{bmatrix}\]
</p>
</div>
</div>

<div id="outline-container-orgd6ed3c3" class="outline-3">
<h3 id="orgd6ed3c3"><span class="section-number-3">6.2</span> Second attempt</h3>
<div class="outline-text-3" id="text-6-2">
<p>
We start with the point of a cube in space:
</p>
\begin{align*}
  [0, 0, 0] ; \ [0, 0, 1]; \ ...
\end{align*}

<p>
We also want the cube to point upward:
\[ [1, 1, 1] \Rightarrow [0, 0, 1] \]
</p>

<p>
Then we have the direction of all the vectors expressed in the frame of the hexapod.
</p>

<div class="org-src-container">
<pre class="src src-matlab">points = [0, 0, 0; ...
          0, 0, 1; ...
          0, 1, 0; ...
          0, 1, 1; ...
          1, 0, 0; ...
          1, 0, 1; ...
          1, 1, 0; ...
          1, 1, 1];
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab"><span class="org-type">figure</span>;
plot3(points(<span class="org-type">:</span>,1), points(<span class="org-type">:</span>,2), points(<span class="org-type">:</span>,3), <span class="org-string">'ko'</span>)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab">sx = cross([1, 1, 1], [1 0 0]);
sx = sx<span class="org-type">/</span>norm(sx);

sy = <span class="org-type">-</span>cross(sx, [1, 1, 1]);
sy = sy<span class="org-type">/</span>norm(sy);

sz = [1, 1, 1];
sz = sz<span class="org-type">/</span>norm(sz);

R = [sx<span class="org-type">'</span>, sy<span class="org-type">'</span>, sz<span class="org-type">'</span>]<span class="org-type">'</span>;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab">cube = zeros(size(points));
<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:size(points, 1)</span>
  cube(<span class="org-constant">i</span>, <span class="org-type">:</span>) = R <span class="org-type">*</span> points(<span class="org-constant">i</span>, <span class="org-type">:</span>)<span class="org-type">'</span>;
<span class="org-keyword">end</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab"><span class="org-type">figure</span>;
hold on;
plot3(points(<span class="org-type">:</span>,1), points(<span class="org-type">:</span>,2), points(<span class="org-type">:</span>,3), <span class="org-string">'ko'</span>);
plot3(cube(<span class="org-type">:</span>,1), cube(<span class="org-type">:</span>,2), cube(<span class="org-type">:</span>,3), <span class="org-string">'ro'</span>);
hold off;
</pre>
</div>

<p>
Now we plot the legs of the hexapod.
</p>
<div class="org-src-container">
<pre class="src src-matlab">leg_indices = [3, 4; ...
               2, 4; ...
               2, 6; ...
               5, 6; ...
               5, 7; ...
               3, 7]

<span class="org-type">figure</span>;
hold on;
<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:6</span>
  plot3(cube(leg_indices(<span class="org-constant">i</span>, <span class="org-type">:</span>),1), cube(leg_indices(<span class="org-constant">i</span>, <span class="org-type">:</span>),2), cube(leg_indices(<span class="org-constant">i</span>, <span class="org-type">:</span>),3), <span class="org-string">'-'</span>);
<span class="org-keyword">end</span>
hold off;
</pre>
</div>

<p>
Vectors are:
</p>
<div class="org-src-container">
<pre class="src src-matlab">legs = zeros(6, 3);
legs_start = zeros(6, 3);

<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:6</span>
  legs(<span class="org-constant">i</span>, <span class="org-type">:</span>) = cube(leg_indices(<span class="org-constant">i</span>, 2), <span class="org-type">:</span>) <span class="org-type">-</span> cube(leg_indices(<span class="org-constant">i</span>, 1), <span class="org-type">:</span>);
  legs_start(<span class="org-constant">i</span>, <span class="org-type">:</span>) = cube(leg_indices(<span class="org-constant">i</span>, 1), <span class="org-type">:</span>)
<span class="org-keyword">end</span>
</pre>
</div>

<p>
We now have the orientation of each leg.
</p>

<p>
We here want to see if the position of the &ldquo;slice&rdquo; changes something.
</p>

<p>
Let&rsquo;s first estimate the maximum height of the Stewart platform.
</p>
<div class="org-src-container">
<pre class="src src-matlab">Hmax = cube(4, 3) <span class="org-type">-</span> cube(2, 3);
</pre>
</div>

<p>
Let&rsquo;s then estimate the middle position of the platform
</p>
<div class="org-src-container">
<pre class="src src-matlab">Hmid = cube(8, 3)<span class="org-type">/</span>2;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf39eafa" class="outline-3">
<h3 id="orgf39eafa"><span class="section-number-3">6.3</span> Generate the Stewart platform for a Cubic configuration</h3>
<div class="outline-text-3" id="text-6-3">
<p>
First we defined the height of the Hexapod.
</p>
<div class="org-src-container">
<pre class="src src-matlab">H = Hmax<span class="org-type">/</span>2;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-matlab">Zs = 1.2<span class="org-type">*</span>cube(2, 3); <span class="org-comment">% Height of the fixed platform</span>
Ze = Zs <span class="org-type">+</span> H; <span class="org-comment">% Height of the mobile platform</span>
</pre>
</div>

<p>
We now determine the location of the joints on the fixed platform.
</p>
<div class="org-src-container">
<pre class="src src-matlab">Aa = zeros(6, 3);
<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:6</span>
  t = (Zs<span class="org-type">-</span>legs_start(<span class="org-constant">i</span>, 3))<span class="org-type">/</span>(legs(<span class="org-constant">i</span>, 3));
  Aa(<span class="org-constant">i</span>, <span class="org-type">:</span>) = legs_start(<span class="org-constant">i</span>, <span class="org-type">:</span>) <span class="org-type">+</span> t<span class="org-type">*</span>legs(<span class="org-constant">i</span>, <span class="org-type">:</span>);
<span class="org-keyword">end</span>
</pre>
</div>

<p>
And the location of the joints on the mobile platform
</p>
<div class="org-src-container">
<pre class="src src-matlab">Ab = zeros(6, 3);
<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:6</span>
  t = (Ze<span class="org-type">-</span>legs_start(<span class="org-constant">i</span>, 3))<span class="org-type">/</span>(legs(<span class="org-constant">i</span>, 3));
  Ab(<span class="org-constant">i</span>, <span class="org-type">:</span>) = legs_start(<span class="org-constant">i</span>, <span class="org-type">:</span>) <span class="org-type">+</span> t<span class="org-type">*</span>legs(<span class="org-constant">i</span>, <span class="org-type">:</span>);
<span class="org-keyword">end</span>
</pre>
</div>

<p>
And we plot the legs.
</p>
<div class="org-src-container">
<pre class="src src-matlab"><span class="org-type">figure</span>;
hold on;
<span class="org-keyword">for</span> <span class="org-variable-name"><span class="org-constant">i</span></span> = <span class="org-constant">1:6</span>
  plot3([Ab(<span class="org-constant">i</span>, 1),Aa(<span class="org-constant">i</span>, 1)], [Ab(<span class="org-constant">i</span>, 2),Aa(<span class="org-constant">i</span>, 2)], [Ab(<span class="org-constant">i</span>, 3),Aa(<span class="org-constant">i</span>, 3)], <span class="org-string">'k-'</span>);
<span class="org-keyword">end</span>
hold off;
xlim([<span class="org-type">-</span>1, 1]);
ylim([<span class="org-type">-</span>1, 1]);
zlim([0, 2]);
</pre>
</div>
</div>
</div>
</div>

<p>

<h1 class='org-ref-bib-h1'>Bibliography</h1>
<ul class='org-ref-bib'><li><a id="geng94_six_degree_of_freed_activ">[geng94_six_degree_of_freed_activ]</a> <a name="geng94_six_degree_of_freed_activ"></a>Geng & Haynes, Six Degree-Of-Freedom Active Vibration Control Using the Stewart Platforms, <i>IEEE Transactions on Control Systems Technology</i>, <b>2(1)</b>, 45-53 (1994). <a href="https://doi.org/10.1109/87.273110">link</a>. <a href="http://dx.doi.org/10.1109/87.273110">doi</a>.</li>
<li><a id="preumont07_six_axis_singl_stage_activ">[preumont07_six_axis_singl_stage_activ]</a> <a name="preumont07_six_axis_singl_stage_activ"></a>Preumont, Horodinca, Romanescu, de Marneffe, Avraam, Deraemaeker, Bossens & Abu Hanieh, A Six-Axis Single-Stage Active Vibration Isolator Based on Stewart Platform, <i>Journal of Sound and Vibration</i>, <b>300(3-5)</b>, 644-661 (2007). <a href="https://doi.org/10.1016/j.jsv.2006.07.050">link</a>. <a href="http://dx.doi.org/10.1016/j.jsv.2006.07.050">doi</a>.</li>
<li><a id="jafari03_orthog_gough_stewar_platf_microm">[jafari03_orthog_gough_stewar_platf_microm]</a> <a name="jafari03_orthog_gough_stewar_platf_microm"></a>Jafari & McInroy, Orthogonal Gough-Stewart Platforms for Micromanipulation, <i>IEEE Transactions on Robotics and Automation</i>, <b>19(4)</b>, 595-603 (2003). <a href="https://doi.org/10.1109/tra.2003.814506">link</a>. <a href="http://dx.doi.org/10.1109/tra.2003.814506">doi</a>.</li>
</ul>
</p>
</div>
<div id="postamble" class="status">
<p class="author">Author: Dehaeze Thomas</p>
<p class="date">Created: 2020-02-06 jeu. 17:25</p>
</div>
</body>
</html>
